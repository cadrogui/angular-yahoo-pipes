/*! angular-yahoo-pipes - v0.0.0 - 2014-11-02
* Copyright (c) 2014 Dmytro Yarmak <dmytroyarmak@gmail.com>; Licensed MIT */
angular.module("dyYahooPipes",[]),angular.module("dyYahooPipes").constant("DY_YAHOO_PIPES_URL_PATTERN","http://pipes.yahoo.com/pipes/pipe.run?_render=json&_id=PIPE_ID&_callback=JSON_CALLBACK"),angular.module("dyYahooPipes").constant("DY_YAHOO_PIPES_PARSE_FUNCTIONS",{title:function(a){return a.title},description:function(a){return a.description.replace(/(<([^>]+)>)/gi,"")},imageUrl:function(a){var b=a["media:thumbnail"],c=angular.isArray(b)?b[0]:b;return c.url}}),angular.module("dyYahooPipes").constant("DY_YAHOO_PIPES_DEFAULT_COUNT",10),angular.module("dyYahooPipes").factory("dyYahooPipesParser",["DY_YAHOO_PIPES_PARSE_FUNCTIONS",function(a){return{parseItem:function(b){return Object.keys(a).reduce(function(c,d){return c[d]=a[d](b),c},{})},parseResponseData:function(a,b){var c;return a.value&&a.value.items?(c=a.value.items.slice(0,b),c.map(this.parseItem)):[]}}}]),angular.module("dyYahooPipes").factory("dyYahooPipesFetcher",["$http","$q","DY_YAHOO_PIPES_URL_PATTERN","DY_YAHOO_PIPES_DEFAULT_COUNT","dyYahooPipesParser",function(a,b,c,d,e){return{fetch:function(b,f){var g=c.replace("PIPE_ID",b);return a.jsonp(g).then(function(a){return e.parseResponseData(a.data,f.count||d)})}}}]),angular.module("dyYahooPipes").directive("dyYahooPipes",function(){return{restrict:"E",replace:!0,templateUrl:"angular-yahoo-pipes.tpl.html",scope:{pipeId:"@",count:"="},controller:["$scope","dyYahooPipesFetcher",function(a,b){b.fetch(a.pipeId,{count:a.count}).then(function(b){a.items=b})}]}}),angular.module("dyYahooPipes").run(["$templateCache",function(a){"use strict";a.put("angular-yahoo-pipes.tpl.html",'<div class="dy-yahoo-pipes">\n  <pre>{{items | json}}</pre>\n</div>\n')}]);